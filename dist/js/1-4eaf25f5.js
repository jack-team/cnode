webpackJsonp([1],{"2IhT":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("hJuQ"),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},"3qAA":function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o("fZjL"),n=i(r),a=o("Dd8w"),l=i(a),s=o("bGai"),c=o("NYxO"),d=o("LHuj"),m=i(d),p=(o("s0MJ"),o("2IhT")),u=i(p),f=(0,c.mapActions)((0,l.default)({},m.default));t.default={name:"detail",components:{Modal:s.Modal,Timage:s.Timage,Review:u.default},data:function(){return(0,l.default)({},f,{isToTop:!0,commentText:"",modalShow:!1,disabledRefresh:!1})},computed:(0,l.default)({},(0,c.mapState)({details:function(e){return e.detail},userState:function(e){return e.user}}),{topicId:function(){return this.$route.params.id},topicDetail:function(){return this.details.desc[this.topicId]||{}},has:function(){var e=this.topicDetail;return!!(0,n.default)(e).length},author:function(){return this.topicDetail.author},replies:function(){return this.topicDetail.replies}}),mounted:function(){var e=this;this.networker=setTimeout(function(){e.getData()},600)},beforeDestroy:function(){this.networker&&clearTimeout(this.networker)},methods:{getData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.getDetail(this.topicId).then(e)},onRefresh:function(e){this.getData().then(e)},getTime:function(e){return formatTime(e)},showCommentModal:function(){this.modalShow=!this.modalShow},getImgUri:function(e){return e.author.avatar_url},onSubmit:function(){var e=this,t=this.commentText;this.userState;return(t=trim(t))?getUserLogin()?void this.commenting():this.$openLogin(function(t){t(),e.commenting()}):this.$PopUp.tip("请输入评论")},commenting:function(){var e=this,t=this.commentText,o=this.userState;t+=" [酷炫的cnode社区](http://cnode.yutao2012.com/)";var i=o.access_token;loading("发送中..."),this.$http.post("/topic/"+this.topicId+"/replies",{accesstoken:i,content:t}).then(function(){e.$PopUp.toast("评论成功！"),e.getData(),e.commentText="",e.showCommentModal()}).finally(loadingClose)},goUser:function(e){var t=e.author.loginname;this.$router.push("/user/"+t)}}}},"5xi/":function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o("Gu7T"),n=i(r),a=o("bO4q"),l=(i(a),o("X4Y4")),s=i(l);t.default={name:"review",created:function(){this.imgs=[],this.viewer=null},beforeDestroy:function(){if(this.viewer){var e=this.viewer,t=e.jroll,o=e.viewer;t.destroy(),document.body.removeChild(o)}},methods:{openModal:function(e){var t=e.currentTarget;if("IMG"!==e.target.nodeName.toLocaleUpperCase())return!1;this.imgs.length||this.setAttr(t),this.viewer||this.initReView()},initReView:function(){this.viewer=new s.default(this.$refs.el)},setAttr:function(e){this.imgs=[].concat((0,n.default)(e.querySelectorAll("img")));for(var t=0;t<this.imgs.length;t++)this.imgs[t].setAttribute("jroll-viewer-image",!0)}}}},"6ZjA":function(e,t){e.exports={render:function(){var e=this,t=this,o=t.$createElement,i=t._self._c||o;return i("div",{directives:[{name:"has-header",rawName:"v-has-header"}],staticClass:"ms-page"},[i("THeader",{attrs:{title:"详情"}}),t._v(" "),i("ScrollView",{attrs:{useRefresh:!0},on:{refresh:t.getData}},[t.has?i("div",[i("div",{staticClass:"desc"},[i("h3",{staticClass:"top-title"},[t._v(t._s(t.topicDetail.title))]),t._v(" "),i("div",{staticClass:"others"},[i("div",{staticClass:"left"},[i("Timage",{staticClass:"avator",attrs:{src:t.getImgUri(t.topicDetail)},on:{click:function(e){t.goUser(t.topicDetail)}}}),t._v(" "),i("div",{staticClass:"user-desc"},[i("div",[t._v(t._s(t.author.loginname))]),t._v(" "),i("div",[t._v("发布于"+t._s(t.getTime(t.topicDetail.create_at)))])])],1),t._v(" "),i("div",{staticClass:"right"},[i("span",[t._v(t._s(t.topicDetail.visit_count)+"次浏览")])])])]),t._v(" "),i("Review",[i("div",{staticClass:"detail",domProps:{innerHTML:t._s(t.topicDetail.content)}})]),t._v(" "),i("div",{staticClass:"comment-container"},[i("div",{staticClass:"comment-header"},[i("div",{staticClass:"comment-num"},[t._v("\n                        共"+t._s(t.topicDetail.reply_count)+"条回复\n                    ")]),t._v(" "),i("TButton",{staticClass:"comment-btn",on:{click:t.showCommentModal}},[t._v("\n                        点击评论\n                    ")])],1),t._v(" "),t.replies.length?i("div",{staticClass:"comment-content"},t._l(t.replies,function(e){return i("div",{staticClass:"comment-list"},[i("div",{staticClass:"comment-user"},[i("Timage",{staticClass:"user-avator",attrs:{src:t.getImgUri(e)},on:{click:function(o){t.goUser(e)}}}),t._v(" "),i("div",{staticClass:"user-desc"},[i("div",[t._v(t._s(e.author.loginname))]),t._v(" "),i("div",[t._v(t._s(t.getTime(e.create_at)))])])],1),t._v(" "),i("div",{domProps:{innerHTML:t._s(e.content)}})])})):t._e()])],1):t._e()]),t._v(" "),i("Modal",{attrs:{show:t.modalShow,position:"bottom",onClose:function(){return e.modalShow=!1}}},[i("form",{staticClass:"comment-form",on:{submit:function(e){e.preventDefault(),t.onSubmit(e)}}},[i("div",{staticClass:"input-wrapper"},[i("textarea",{directives:[{name:"textarea-auto",rawName:"v-textarea-auto"},{name:"model",rawName:"v-model",value:t.commentText,expression:"commentText"}],staticClass:"input-comment",attrs:{contenteditable:"true",placeholder:"输入评论"},domProps:{value:t.commentText},on:{input:function(e){e.target.composing||(t.commentText=e.target.value)}}})]),t._v(" "),i("button",{staticClass:"send-btn"},[t._v("\n                发布\n            ")])])])],1)},staticRenderFns:[]}},"8ndB":function(e,t,o){t=e.exports=o("FZ+f")(!1),t.push([e.i,".margin-tb-zero,.markdown-text ol ol,.markdown-text ol ul,.markdown-text ol ul ol,.markdown-text ol ul ul,.markdown-text ul ol,.markdown-text ul ul,.markdown-text ul ul ol,.markdown-text ul ul ul{margin-top:0;margin-bottom:0}.markdown-text{font-size:15px;color:#333;line-height:1.6;word-wrap:break-word;padding:12px;background:#fff}.markdown-text>:first-child{margin-top:0!important}.markdown-text>:last-child{margin-bottom:0!important}.markdown-text *{-webkit-box-sizing:border-box;box-sizing:border-box}.markdown-text h1,.markdown-text h2,.markdown-text h3,.markdown-text h4,.markdown-text h5,.markdown-text h6{margin-top:1em;margin-bottom:16px;font-weight:700;line-height:1.4}.markdown-text blockquote,.markdown-text dl,.markdown-text ol,.markdown-text p,.markdown-text pre,.markdown-text table,.markdown-text ul{margin-top:0;margin-bottom:16px}.markdown-text h1{margin:.67em 0;font-size:32px;line-height:1.2}.markdown-text h1,.markdown-text h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-text h2{font-size:28px;line-height:1.225}.markdown-text h3{font-size:24px;line-height:1.43}.markdown-text h4{font-size:20px}.markdown-text h5{font-size:16px}.markdown-text h6{font-size:12px;color:#777}.markdown-text ol,.markdown-text ul{padding-left:2em}.markdown-text ol ol,.markdown-text ul ol{list-style-type:lower-roman}.markdown-text ol ul,.markdown-text ul ul{list-style-type:circle}.markdown-text ol ul ul,.markdown-text ul ul ul{list-style-type:square}.markdown-text ol{list-style-type:decimal}.markdown-text ul{list-style-type:disc}.markdown-text blockquote{margin-left:0;margin-right:0;padding:0 15px;color:#777;border-left:4px solid #ddd}.markdown-text table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all;border-collapse:collapse;border-spacing:0}.markdown-text table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-text table tr:nth-child(2n){background-color:#f8f8f8}.markdown-text table td,.markdown-text table th{padding:6px 13px;border:1px solid #ddd}.markdown-text pre{word-wrap:normal;padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-text code{display:inline;max-width:none;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;white-space:pre-wrap;border:0;border-radius:3px;background-color:transparent;font-size:13px}.markdown-text a{color:#4078c0;text-decoration:none;background:transparent}.markdown-text img{max-width:100%;max-height:100%;border-radius:4px;-webkit-box-shadow:0 0 10px #555;box-shadow:0 0 10px #555}.markdown-text strong{font-weight:700}.markdown-text em{font-style:italic}.markdown-text del{text-decoration:line-through}.task-list-item{list-style-type:none}.task-list-item input{font:13px/1.4 Helvetica,arial,nimbussansl,liberationsans,freesans,clean,sans-serif;margin:0 .35em .25em -1.6em;vertical-align:middle}.task-list-item input[disabled]{cursor:default}.task-list-item input[type=checkbox],.task-list-item input[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}",""])},Cdx3:function(e,t,o){var i=o("sB3e"),r=o("lktj");o("uqUo")("keys",function(){return function(e){return r(i(e))}})},GwIj:function(e,t,o){function i(e){o("aUuB"),o("ftgX")}var r=o("VU/8")(o("3qAA"),o("6ZjA"),i,"data-v-1b459aee",null);e.exports=r.exports},X4Y4:function(e,t,o){var i;!function(r,n,a){"use strict";function l(e){var t=n.createElement("div");return t.className=e,t}var s,c=r.innerWidth,d=r.innerHeight,m=c/d,p=0,u=[],f=0,h=function(e,t){var o=this;c=r.innerWidth,d=r.innerHeight,m=c/d,o.el="string"==typeof e?n.querySelector(e):e,o.el.addEventListener("click",function(e){o._click(e)},!1),o.options={JRoll:a};for(var i in t)o.options[i]=t[i];o._init()};h.version="0.2.2",h.prototype={_createStyle:function(){var e=n.getElementById("jroll_style"),t="\n/* jroll-viewer */\n.jroll-viewer{display:none;height:100%;width:100%;overflow:hidden;background:#000;position:absolute;top:0;left:0;z-index:9999}.jroll-viewer.duration{-webkit-transition-duration:200ms;transition-duration:200ms}.jroll-viewer.small{-webkit-transform:scale(0.01,0.01);transform:scale(0.01,0.01);display:block}.jroll-viewer.normal{-webkit-transform:scale(1,1) !important;transform:scale(1,1) !important}.jroll-viewer-scroller{height:100%}.jroll-viewer-page{height:100%;position:absolute}.jroll-viewer-item{width:100%;height:100%;position:relative;overflow:hidden}.jroll-viewer-img{position:absolute;width:100%;height:auto}.jroll-viewer-pointer{color:#fff;font-size:12px;position:absolute;left:0;bottom:40px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.jroll-viewer-pointer span{display:block;width:4px;height:4px;border-radius:10px;background:#666;float:left;margin:0 5px}.jroll-viewer-pointer span.active{background:#fff}\n";e?/jroll-viewer/.test(e.innerHTML)||(e.innerHTML+=t):(e=n.createElement("style"),e.id="jroll_style",e.innerHTML=t,n.head.appendChild(e))},_createImg:function(e,t){var o,i=this,r="",n="";f=t.length,o="number"==typeof e?e:null;for(var a=0;a<f;a++)r+='<div class="jroll-viewer-page" style="width:'+c+"px;left:"+a*c+'px"><div class="jroll-viewer-item"><img src="'+(i.options.data?t[a].dataset[i.options.data]:t[a].src)+'" class="jroll-viewer-img"></div></div>',f<=5&&(n+="<span></span>"),null===o&&("object"==typeof e&&e===t[a]||"string"==typeof e&&e===t[a].getAttribute("src"))&&(o=a);i.scroller.innerHTML=r,i.pointer.innerHTML=n,s=i.pointer.querySelectorAll("span");var l,h=i.scroller.querySelectorAll(".jroll-viewer-item");for(a=0;a<f;a++)l=new i.options.JRoll(h[a],{id:t[a].getAttribute("jroll-viewer-id"),zoom:!0,scrollFree:!0,bounce:!1,autoStyle:!1,zoomDuration:0}),t[a].setAttribute("jroll-viewer-id",l.id),l.on("scroll",function(e){var t=this;if(e){var o=t.scroller.offsetHeight<=t.wrapper.clientHeight||Math.abs(t.jroll_viewer_start-e.touches[0].pageX)>50,r=t.x===t.maxScrollX&&o,n=t.x===t.minScrollX&&o;(r||n)&&e&&t.call(i.jroll,e)}}).on("scrollStart",function(e){this.jroll_viewer_start=e.touches[0].pageX}).on("zoomStart",function(){i.switch(p)}).on("zoomEnd",function(){var e,t=this;t.scroller.jroll_viewer_ratio>m?(e=(d-t.scroller.height*t._z.scale)/2,t.scroller.style.top=e<0?0:e+"px"):(e=(c-t.scroller.width*t._z.scale)/2,t.scroller.style.left=e<0?0:e+"px")}).scroller.onload=function(){i._imgOnload(this)},u.push(l);return o},_click:function(e){var t=e.target,o=this;"IMG"===t.tagName&&t.hasAttribute("jroll-viewer-image")&&o.show(t)},_init:function(){var e=this;if(e.viewer=n.getElementById("jroll_viewer"),e.viewer)return e.scroller=e.viewer.querySelector(".jroll-viewer-scroller"),e.pointer=e.viewer.querySelector(".jroll-viewer-pointer"),void(e.jroll=e.scroller.jroll);e._createStyle(),e.viewer=l("jroll-viewer"),e.scroller=l("jroll-viewer-scroller"),e.pointer=l("jroll-viewer-pointer"),e.viewer.id="jroll_viewer",e.viewer.appendChild(e.scroller),e.viewer.appendChild(e.pointer),n.body.appendChild(e.viewer),e.viewer.onclick=function(){e.hide()},e.jroll=new e.options.JRoll(e.viewer,{scrollY:!1,scrollX:!0,momentum:!1,edgeRelease:!1}).on("scrollStart",function(){this.viewerStartTime=(new Date).getTime()}).on("touchEnd",function(){var t=this,o=p*c+t.x;if(t.x!==t.minScrollX&&t.x!==t.maxScrollX&&0!==Math.abs(t.x%c)){var i;i=Math.abs(o)<((new Date).getTime()-t.viewerStartTime<300?10:100)?0:o>0?-1:1,e.switch(p+i,200)}}).on("scroll",function(e){var t=this,o=u[p],i=-1===t.directionX&&t.x<-p*c&&o.x>o.maxScrollX,r=1===t.directionX&&t.x>-p*c&&o.x<o.minScrollX;(i||r)&&(t.scrollTo(-p*c,0),t.call(o,e))}),r.addEventListener("resize",e._rotate.bind(e)),r.addEventListener("orientationchange",e._rotate.bind(e))},_imgOnload:function(e){var t=this,o=e.width/e.height;e.jroll_viewer_ratio=o,o>m?(e.style.width="100%",e.style.height="auto",e.style.left="0",e.style.top=(d-c/o)/2+"px",e.jroll.options.zoomMax=t.options.zoomMax||e.naturalWidth/c||3):(e.style.width="auto",e.style.height="100%",e.style.left=(c-d*o)/2+"px",e.style.top="0",e.jroll.options.zoomMax=t.options.zoomMax||e.naturalHeight/d||3),e.jroll.maxScrollX=e.jroll.maxScrollY=e.jroll.minScrollX=e.jroll.minScrollY=0},_rotate:function(){c=r.innerWidth,d=r.innerHeight,m=c/d;var e=this;e.jroll.scroller.style.width=c*f+"px",u.forEach(function(t,o){e._imgOnload(t.scroller),t.wrapper.parentElement.style.width=c+"px",t.wrapper.parentElement.style.left=c*o+"px"}),e.switch(p,0,!0)},_reset:function(e){var t=u[e].scroller,o=t.jroll_viewer_ratio;s&&s.length&&s[e].classList.remove("active"),o>m?t.style.top=(d-c/o)/2+"px":t.style.left=(c-d*o)/2+"px",u[e]._z.scale=1,u[e].scrollTo(0,0).refresh()},_dot:function(e){s&&s.length?s[e].classList.add("active"):this.pointer.innerHTML=e+1+" / "+f},switch:function(e,t,o){var i=this,r=p;e=parseInt(e),e>=0&&e<f&&(p=e),p===r?(i.jroll.scrollTo(-c*e,0,t||0),i._dot(p)):i.jroll.scrollTo(-c*e,0,t||0,!1,function(){for(var r=0,n=f;r<n;r++)r===e?(i._dot(r),u[r].refresh(),o&&i._reset(r)):i._reset(r),u[r].wrapper.style.display=r===e||r===e-1||r===e+1?"block":"none";"function"==typeof i.options.afterSwitch&&t&&i.options.afterSwitch(e)})},show:function(e){var t,o=this,i=o.el.querySelectorAll("img[jroll-viewer-image]");u=[],o.viewer.style.visibility="hidden",o.viewer.style.display="block",o.viewer.style.top=n.body.scrollTop+"px",o.scroller.style.width=c*i.length+"px",o.jroll.refresh(),t=o._createImg(e,i),o.switch(t),o.viewer.classList.add("small"),setTimeout(function(){o.viewer.style.visibility="visible",o.viewer.classList.add("duration"),o.viewer.classList.add("normal")},0)},hide:function(){var e=this;e.viewer.classList.remove("normal"),setTimeout(function(){e.viewer.classList.remove("small"),e.viewer.classList.remove("duration"),e.viewer.style.display="none"},250)}},void 0!==e&&e.exports&&(e.exports=h),void 0!==(i=function(){return h}.call(t,o,t,e))&&(e.exports=i),r.JRollViewer=h}(window,document,JRoll)},aUuB:function(e,t,o){var i=o("8ndB");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o("rjj0")("6998c91b",i,!0,{})},fZjL:function(e,t,o){e.exports={default:o("jFbC"),__esModule:!0}},ftgX:function(e,t,o){var i=o("nRz8");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o("rjj0")("8e97ba62",i,!0,{})},gQYX:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"el",on:{click:e.openModal}},[e._t("default")],2)},staticRenderFns:[]}},hJuQ:function(e,t,o){function i(e){o("orEj")}var r=o("VU/8")(o("5xi/"),o("gQYX"),i,"data-v-45f25c14",null);e.exports=r.exports},jFbC:function(e,t,o){o("Cdx3"),e.exports=o("FeBl").Object.keys},nRz8:function(e,t,o){t=e.exports=o("FZ+f")(!1),t.push([e.i,".desc[data-v-1b459aee]{padding:16px 12px;background:#fff}.desc .top-title[data-v-1b459aee]{line-height:24px}.desc .others[data-v-1b459aee]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:10px}.desc .left[data-v-1b459aee]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.desc .left[data-v-1b459aee],.desc .right[data-v-1b459aee]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.desc .right[data-v-1b459aee]{font-size:12px;color:#999}.desc .right span[data-v-1b459aee]{display:block}.desc .user-desc[data-v-1b459aee]{font-size:12px;color:#999;margin-left:6px}.desc .user-desc [data-v-1b459aee]:first-child{margin-bottom:4px}.desc .avator[data-v-1b459aee]{width:36px;height:36px;border-radius:18px}.detail[data-v-1b459aee]{width:100%;margin:4px 0}.comment-container[data-v-1b459aee]{background-color:#fff}.comment-container .comment-header[data-v-1b459aee]{padding:6px 10px;border-left:3px solid #ff5655;border-bottom:1px solid #ececec;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-container .comment-num[data-v-1b459aee]{font-size:16px}.comment-container .comment-btn[data-v-1b459aee]{height:36px;padding:0 10px;border-radius:6px}.comment-container .comment-content[data-v-1b459aee]{padding:8px}.comment-container .comment-content .comment-list[data-v-1b459aee]{padding-top:12px;border-bottom:1px solid #ececec}.comment-container .comment-content .comment-list[data-v-1b459aee]:last-child{border-bottom:none}.comment-container .comment-content .comment-user[data-v-1b459aee]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-container .comment-content .user-avator[data-v-1b459aee]{width:36px;height:36px;border-radius:18px}.comment-container .comment-content .user-desc[data-v-1b459aee]{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:12px;color:#999;margin-left:6px}.comment-container .comment-content .user-desc [data-v-1b459aee]:first-child{margin-bottom:4px}.comment-form[data-v-1b459aee]{width:100%;background-color:#fff;border-top:1px solid #ff5655;-ms-flex-align:center;padding:10px 0 10px 10px}.comment-form .input-wrapper[data-v-1b459aee],.comment-form[data-v-1b459aee]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;align-items:center}.comment-form .input-wrapper[data-v-1b459aee]{min-height:36px;-webkit-box-flex:1;-ms-flex:1;flex:1;background-color:#ececec;border-radius:4px;-ms-flex-align:center;padding:6px 8px}.comment-form .input-comment[data-v-1b459aee]{background-color:transparent;width:100%;outline:none;border:none;font-size:14px;color:#565656;resize:none;padding:0;height:22px}.comment-form .send-btn[data-v-1b459aee]{height:36px;width:60px;background-color:transparent;color:#ff5655}",""])},orEj:function(e,t,o){var i=o("qIqm");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o("rjj0")("1d583326",i,!0,{})},qIqm:function(e,t,o){t=e.exports=o("FZ+f")(!1),t.push([e.i,"",""])},s0MJ:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){var t=/<img.*?(?:>|\/>)/gi,o=/src=[\'\"]?([^\'\"]*)[\'\"]?/i;return e.match(t).map(function(e){return e.match(o)[1]})};t.matchImageUrl=i}});